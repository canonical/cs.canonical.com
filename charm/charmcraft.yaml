# This file configures Charmcraft.
# See https://juju.is/docs/sdk/charmcraft-config for guidance.
name: cs-canonical-com
type: charm
bases:
  - build-on:
      - name: ubuntu
        channel: "22.04"
    run-on:
      - name: ubuntu
        channel: "22.04"
summary: This is a portal tailored to managing content on our websites
description: |
  It's useful for:
  - Making change requests on specific pages, and automating the related JIRA overhead
  - Assigning owners to individual pages
  - Collecting all relevant links for a page in one place:
  - copydoc link
  - link to github code
  - product category
extensions:
  - flask-framework
config:
  options:
    copydoc-template-id:
      type: string
      description: "ID of the copydoc template to use"
      default: ""
    directory-api-token:
      type: string
      description: "Token to access the directory API"
      default: "token"
    jira-labels:
      type: string
      description: "Comma-separated list of JIRA labels to apply to new JIRA issues"
      default: "sites_BAU"
    jira-email:
      type: string
      description: "Email address to use for JIRA API authentication"
      default: ""
    jira-reporter-id:
      type: string
      description: "JIRA test reporter ID for creating issues during playwright tests"
      default: ""
    jira-token:
      type: string
      description: "JIRA API token"
      default: ""
    jira-url:
      type: string
      description: "JIRA API URL"
      default: ""
    jira-copy-updates-epic:
      type: string
      description: "JIRA epic to use for copy updates"
      default: ""
    google-drive-folder-id:
      type: string
      description: "Google Drive folder ID for storing copy updates"
      default: ""
    google-private-key:
      type: string
      description: "Google service account private key"
      default: ""
    google-private-key-id:
      type: string
      description: "Google service account private key ID"
      default: ""
    gh-token:
      type: string
      description: "GitHub token for accessing the GitHub API"
      default: ""
    repo-org:
      type: string
      description: "GitHub organization to use for repositories"
      default: "https://github.com/canonical"
    sites-maintenance-epic:
      type: string
      description: "JIRA epic to use for sites maintenance tasks"
      default: ""
    sites-maintenance-labels:
      type: string
      description: "Comma-separated list of JIRA labels to apply to maintenance tasks"
      default: "sites_Maintenance"
    sites-new-features-labels:
      type: string
      description: "Comma-separated list of JIRA labels to apply to new feature requests"
      default: "sites_NewFeature"
    cs-auth-token:
      type: string
      description: "Token for authenticating with the CS API"
      default: "token"
    bau-bot-webhook-url:
      type: string
      description: "Webhook URL for the BAU bot to send notifications"
      default: "webhook_url"
    sso-client-id:
      type: string
      description: "SSO client ID for authentication"
      default: "sso_client_id"
    sso-client-secret:
      type: string
      description: "SSO client secret for authentication"
      default: "sso_client_secret"
    oidc-provider:
      type: string
      description: "OIDC provider for authentication"
      default: "oidc_provider_url"

requires:
  postgresql:
    interface: postgresql_client
    optional: false
    limit: 1
  redis:
    interface: redis
    optional: true
    limit: 1
